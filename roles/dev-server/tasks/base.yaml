
- name: Locals
  set_fact:
    hostname: "{{ config.hostname | default('rpi-' + 9999 | random | string) }}"

- name: Debug Config
  debug:
    var: config

# Set hostname
- name: Set hostname
  hostname:
    name: '{{ config.hostname }}'

# Ensure the latest version of apt package manager
- name: Update apt package manager
  apt:
    update_cache: yes

# Install necessary packages
- name: Install required packages
  apt:
    name: "{{ item }}"
    state: present
  loop:
    - git
    - vim
    - curl
    - build-essential
    - ca-certificates

# Create a user for development
- name: Create development user
  user:
    name: '{{ ansible_user }}'
    state: present
    groups: sudo
    create_home: yes
